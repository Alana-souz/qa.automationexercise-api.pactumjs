{
  "stats": {
    "suites": 5,
    "tests": 14,
    "passes": 14,
    "pending": 0,
    "failures": 0,
    "start": "2025-11-04T00:40:31.622Z",
    "end": "2025-11-04T00:40:34.581Z",
    "duration": 2959,
    "testsRegistered": 14,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "7b2a5a76-2056-46ad-b7d3-4bdff7dcee78",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "f0911b59-48af-4e7b-a40e-ed2af9265549",
          "title": "POST /login - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Login.test.js",
          "file": "\\test\\api\\Login.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"POST /login - Funcional\"",
              "fullTitle": "POST /login - Funcional \"before all\" hook in \"POST /login - Funcional\"",
              "timedOut": false,
              "duration": 1043,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Fulano QA',\n  email: `login${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true',\n};\n// Cria usuário para login\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { email: novoUsuario.email, password: novoUsuario.password };",
              "err": {},
              "uuid": "4919a56c-5ac9-4f7b-9315-d214a9cf4a55",
              "parentUUID": "f0911b59-48af-4e7b-a40e-ed2af9265549",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve realizar login com credenciais válidas",
              "fullTitle": "POST /login - Funcional Deve realizar login com credenciais válidas",
              "timedOut": false,
              "duration": 40,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await pactum.spec()\n  .post(`${baseUrl}/login`)\n  .withBody(testUser)\n  .expectStatus(200)\n  .expectHeaderContains('content-type', 'application/json');\nJoi.assert(res.body, loginSuccessSchema);",
              "err": {},
              "uuid": "0ed07b4a-da17-4cac-bcae-dff35bfd21cb",
              "parentUUID": "f0911b59-48af-4e7b-a40e-ed2af9265549",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "0ed07b4a-da17-4cac-bcae-dff35bfd21cb"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 40,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
          "title": "Produtos - Api e Contrato",
          "fullFile": "C:\\exercise-Api\\test\\api\\Produtos.test.js",
          "file": "\\test\\api\\Produtos.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Produtos - Api e Contrato\"",
              "fullTitle": "Produtos - Api e Contrato \"before all\" hook in \"Produtos - Api e Contrato\"",
              "timedOut": false,
              "duration": 120,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Cria usuário admin\nconst adminUser = {\n  nome: 'Admin QA',\n  email: `admin_${Date.now()}@qa.com`,\n  password: 'teste123',\n  administrador: 'true'\n};\nawait spec().post('/usuarios').withJson(adminUser).expectStatus(201);\n// Login para obter token\nconst resLogin = await spec()\n  .post('/login')\n  .withJson({ email: adminUser.email, password: adminUser.password })\n  .expectStatus(200);\ntokenAdmin = resLogin.body.authorization.startsWith('Bearer ')\n  ? resLogin.body.authorization\n  : `Bearer ${resLogin.body.authorization}`;",
              "err": {},
              "uuid": "13cef2ef-89ae-48b4-9ee9-1e07d09bdbf0",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "GET /produtos - Busca dos produtos",
              "fullTitle": "Produtos - Api e Contrato GET /produtos - Busca dos produtos",
              "timedOut": false,
              "duration": 47,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nconst produtosArray = Array.isArray(res.body) ? res.body : res.body.produtos;\nif (!Array.isArray(produtosArray)) throw new Error('Esperado array de produtos');\nif (produtosArray.length > 0) {\n  Joi.assert(produtosArray[0], produtoSchema);\n}",
              "err": {},
              "uuid": "e745f52c-4c84-4b59-a854-a83a33f005ef",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Cadastro de produto",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Cadastro de produto",
              "timedOut": false,
              "duration": 24,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoProduto = {\n  nome: `Produto QA ${Date.now()}`,\n  preco: 100,\n  descricao: 'Produto de teste',\n  quantidade: 10\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(novoProduto)\n  .expectStatus(201);\ntestProduto = { ...novoProduto, _id: res.body._id };",
              "err": {},
              "uuid": "1f14d48a-74a0-420c-9da0-d0a143d18bde",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /produtos/{_id} - Busca do produto por id",
              "fullTitle": "Produtos - Api e Contrato GET /produtos/{_id} - Busca do produto por id",
              "timedOut": false,
              "duration": 53,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nJoi.assert(res.body, produtoSchema);",
              "err": {},
              "uuid": "8a7911ea-49c4-4449-8c82-e40953d244b1",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /produtos/{_id} - Edição do produto por id",
              "fullTitle": "Produtos - Api e Contrato PUT /produtos/{_id} - Edição do produto por id",
              "timedOut": false,
              "duration": 76,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const { _id, ...produtoSemId } = testProduto;\nconst produtoAtualizado = {\n  ...produtoSemId,\n  nome: `Produto QA Atualizado ${Date.now()}`,\n  preco: 150,\n  quantidade: 15\n};\nconst res = await spec()\n  .put(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoAtualizado)\n  .expectStatus(200);\nif (res.body.message !== 'Registro alterado com sucesso') {\n  throw new Error(`Esperado 'Registro alterado com sucesso', mas retornou: ${res.body.message}`);\n}\ntestProduto = { ...produtoAtualizado, _id: testProduto._id };",
              "err": {},
              "uuid": "62583742-f9d8-4799-9722-805a69273c6c",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /produtos/{_id} - Exclusão do produto por id",
              "fullTitle": "Produtos - Api e Contrato DELETE /produtos/{_id} - Exclusão do produto por id",
              "timedOut": false,
              "duration": 52,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200)\n  .expectJsonLike({ message: 'Registro excluído com sucesso' });",
              "err": {},
              "uuid": "1de10c66-c689-434d-b740-651c5c47decc",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "timedOut": false,
              "duration": 89,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const produtoContrato = {\n  nome: `Produto Contrato ${Date.now()}`,\n  preco: 200,\n  descricao: 'Produto de contrato',\n  quantidade: 20\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoContrato)\n  .expectStatus(201);\n// Validação de contrato\nJoi.assert({ ...produtoContrato, _id: res.body._id }, produtoSchema);\n// Limpeza\nawait spec().delete(`/produtos/${res.body._id}`).withHeaders('Authorization', tokenAdmin);",
              "err": {},
              "uuid": "7e6bf4c7-befa-4002-a41f-9d0e4a879f1f",
              "parentUUID": "4ba808ee-b26a-4b43-ae69-5da8967770a4",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "e745f52c-4c84-4b59-a854-a83a33f005ef",
            "1f14d48a-74a0-420c-9da0-d0a143d18bde",
            "8a7911ea-49c4-4449-8c82-e40953d244b1",
            "62583742-f9d8-4799-9722-805a69273c6c",
            "1de10c66-c689-434d-b740-651c5c47decc",
            "7e6bf4c7-befa-4002-a41f-9d0e4a879f1f"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 341,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
          "title": "Usuários - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Usuarios.test.js",
          "file": "\\test\\api\\Usuarios.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Usuários - Funcional\"",
              "fullTitle": "Usuários - Funcional \"before all\" hook in \"Usuários - Funcional\"",
              "timedOut": false,
              "duration": 16,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Criar usuário dinâmico inicial para os testes\nconst novoUsuario = {\n  nome: 'QA Funcional',\n  email: `qa_funcional_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { ...novoUsuario, _id: res.body._id };",
              "err": {},
              "uuid": "1d4f4cae-e61c-49b0-a916-898e048443dd",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "POST /usuarios - Cadastro com sucesso",
              "fullTitle": "Usuários - Funcional POST /usuarios - Cadastro com sucesso",
              "timedOut": false,
              "duration": 331,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Novo QA',\n  email: `novoqa_${Date.now()}@qa.com`,\n  password: '123456',\n  administrador: 'false'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\nexpect(res.body.message).to.equal('Cadastro realizado com sucesso');\nexpect(res.body).to.have.property('_id');",
              "err": {},
              "uuid": "5d38da68-8f17-4717-80b4-bf6704f1abbd",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios - Busca do usuário",
              "fullTitle": "Usuários - Funcional GET /usuarios - Busca do usuário",
              "timedOut": false,
              "duration": 43,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/usuarios')\n  .expectStatus(200);\nres.body.usuarios.forEach(u => Joi.assert(u, usuarioSchema));",
              "err": {},
              "uuid": "79a528ad-87dc-4a07-9e31-0c611d034cc2",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios/{_id} - Deve buscar usuário por ID",
              "fullTitle": "Usuários - Funcional GET /usuarios/{_id} - Deve buscar usuário por ID",
              "timedOut": false,
              "duration": 14,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/usuarios/${testUser._id}`)\n  .expectStatus(200);\nJoi.assert(res.body, usuarioSchema);",
              "err": {},
              "uuid": "e0ac2397-bef7-4183-86ac-85c954ef8541",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /usuarios/{_id} -Alteração do usuário por Id",
              "fullTitle": "Usuários - Funcional PUT /usuarios/{_id} -Alteração do usuário por Id",
              "timedOut": false,
              "duration": 31,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const updated = {\n  nome: 'QA Atualizado',\n  email: testUser.email,\n  password: testUser.password,\n  administrador: testUser.administrador\n};\nconst res = await spec()\n  .put(`/usuarios/${testUser._id}`)\n  .withJson(updated)\n  .expectStatus(200);\nexpect(res.body.message).to.equal('Registro alterado com sucesso');",
              "err": {},
              "uuid": "7243f9c4-55b5-48c9-922b-c84f97f008d4",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "fullTitle": "Usuários - Funcional DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "timedOut": false,
              "duration": 15,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/usuarios/${testUser._id}`)\n  .expectStatus(200);",
              "err": {},
              "uuid": "ce307792-8d05-4aa0-a424-be15848cc914",
              "parentUUID": "f718b68a-bf4f-4dcb-89af-b47fe63a8f64",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "5d38da68-8f17-4717-80b4-bf6704f1abbd",
            "79a528ad-87dc-4a07-9e31-0c611d034cc2",
            "e0ac2397-bef7-4183-86ac-85c954ef8541",
            "7243f9c4-55b5-48c9-922b-c84f97f008d4",
            "ce307792-8d05-4aa0-a424-be15848cc914"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 434,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "b3cbaad4-3361-425c-a1d2-81d91cf06c52",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\Cadastro.test.js",
          "file": "\\test\\contrato\\Cadastro.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 35,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Teste',\n  email: `teste${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "5060554a-5e8c-4015-adb7-c51dd3a549ed",
              "parentUUID": "b3cbaad4-3361-425c-a1d2-81d91cf06c52",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "5060554a-5e8c-4015-adb7-c51dd3a549ed"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 35,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "6472ceb2-81dc-4546-a647-724069374aff",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\usuarios.test.js",
          "file": "\\test\\contrato\\usuarios.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 315,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Contrato',\n  email: `qa_contrato_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "1b955310-10c9-45dc-96b6-0197a3469b02",
              "parentUUID": "6472ceb2-81dc-4546-a647-724069374aff",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "1b955310-10c9-45dc-96b6-0197a3469b02"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 315,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 20000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.4"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "index",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "mochawesome-report",
        "reportFilename": "index"
      },
      "version": "6.3.0"
    }
  }
}