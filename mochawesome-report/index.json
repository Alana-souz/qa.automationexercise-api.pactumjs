{
  "stats": {
    "suites": 5,
    "tests": 14,
    "passes": 14,
    "pending": 0,
    "failures": 0,
    "start": "2025-11-03T18:55:44.124Z",
    "end": "2025-11-03T18:55:45.309Z",
    "duration": 1185,
    "testsRegistered": 14,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "ef65238a-2f5e-428c-9660-52cec68d4b03",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "804f9a49-71a4-4351-b142-67211bca3dac",
          "title": "POST /login - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Login.test.js",
          "file": "\\test\\api\\Login.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"POST /login - Funcional\"",
              "fullTitle": "POST /login - Funcional \"before all\" hook in \"POST /login - Funcional\"",
              "timedOut": false,
              "duration": 234,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Fulano QA',\n  email: `login${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true',\n};\n// Cria usuário para login\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { email: novoUsuario.email, password: novoUsuario.password };",
              "err": {},
              "uuid": "6cb5495a-8c6d-414f-bf60-000ed083c190",
              "parentUUID": "804f9a49-71a4-4351-b142-67211bca3dac",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve realizar login com credenciais válidas",
              "fullTitle": "POST /login - Funcional Deve realizar login com credenciais válidas",
              "timedOut": false,
              "duration": 38,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await pactum.spec()\n  .post(`${baseUrl}/login`)\n  .withBody(testUser)\n  .expectStatus(200)\n  .expectHeaderContains('content-type', 'application/json');\nJoi.assert(res.body, loginSuccessSchema);",
              "err": {},
              "uuid": "1ce9daeb-804b-4867-90b1-1dc4bc7759de",
              "parentUUID": "804f9a49-71a4-4351-b142-67211bca3dac",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "1ce9daeb-804b-4867-90b1-1dc4bc7759de"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 38,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "f21817b8-dd34-403d-b506-6e70c00b16b6",
          "title": "Produtos - Api e Contrato",
          "fullFile": "C:\\exercise-Api\\test\\api\\Produtos.test.js",
          "file": "\\test\\api\\Produtos.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Produtos - Api e Contrato\"",
              "fullTitle": "Produtos - Api e Contrato \"before all\" hook in \"Produtos - Api e Contrato\"",
              "timedOut": false,
              "duration": 61,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Cria usuário admin\nconst adminUser = {\n  nome: 'Admin QA',\n  email: `admin_${Date.now()}@qa.com`,\n  password: 'teste123',\n  administrador: 'true'\n};\nawait spec().post('/usuarios').withJson(adminUser).expectStatus(201);\n// Login para obter token\nconst resLogin = await spec()\n  .post('/login')\n  .withJson({ email: adminUser.email, password: adminUser.password })\n  .expectStatus(200);\ntokenAdmin = resLogin.body.authorization.startsWith('Bearer ')\n  ? resLogin.body.authorization\n  : `Bearer ${resLogin.body.authorization}`;",
              "err": {},
              "uuid": "7e5978f3-779f-48df-ad6f-a8839af324d8",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "GET /produtos - Busca dos produtos",
              "fullTitle": "Produtos - Api e Contrato GET /produtos - Busca dos produtos",
              "timedOut": false,
              "duration": 30,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nconst produtosArray = Array.isArray(res.body) ? res.body : res.body.produtos;\nif (!Array.isArray(produtosArray)) throw new Error('Esperado array de produtos');\nif (produtosArray.length > 0) {\n  Joi.assert(produtosArray[0], produtoSchema);\n}",
              "err": {},
              "uuid": "cd248ede-69b1-4773-869c-d5894bef924a",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Cadastro de produto",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Cadastro de produto",
              "timedOut": false,
              "duration": 21,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoProduto = {\n  nome: `Produto QA ${Date.now()}`,\n  preco: 100,\n  descricao: 'Produto de teste',\n  quantidade: 10\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(novoProduto)\n  .expectStatus(201);\ntestProduto = { ...novoProduto, _id: res.body._id };",
              "err": {},
              "uuid": "77305ad6-099d-4af6-a44a-454ee8724bf7",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /produtos/{_id} - Busca do produto por id",
              "fullTitle": "Produtos - Api e Contrato GET /produtos/{_id} - Busca do produto por id",
              "timedOut": false,
              "duration": 13,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nJoi.assert(res.body, produtoSchema);",
              "err": {},
              "uuid": "18adf9b7-bba9-4535-8daf-bbcd969a4ce1",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /produtos/{_id} - Edição do produto por id",
              "fullTitle": "Produtos - Api e Contrato PUT /produtos/{_id} - Edição do produto por id",
              "timedOut": false,
              "duration": 18,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const { _id, ...produtoSemId } = testProduto;\nconst produtoAtualizado = {\n  ...produtoSemId,\n  nome: `Produto QA Atualizado ${Date.now()}`,\n  preco: 150,\n  quantidade: 15\n};\nconst res = await spec()\n  .put(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoAtualizado)\n  .expectStatus(200);\nif (res.body.message !== 'Registro alterado com sucesso') {\n  throw new Error(`Esperado 'Registro alterado com sucesso', mas retornou: ${res.body.message}`);\n}\ntestProduto = { ...produtoAtualizado, _id: testProduto._id };",
              "err": {},
              "uuid": "0a6cc5d9-175f-4ed7-8689-85737d053a15",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /produtos/{_id} - Exclusão do produto por id",
              "fullTitle": "Produtos - Api e Contrato DELETE /produtos/{_id} - Exclusão do produto por id",
              "timedOut": false,
              "duration": 40,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200)\n  .expectJsonLike({ message: 'Registro excluído com sucesso' });",
              "err": {},
              "uuid": "f55c6bf6-301a-4f87-8be9-6d62aef278c0",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "timedOut": false,
              "duration": 70,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const produtoContrato = {\n  nome: `Produto Contrato ${Date.now()}`,\n  preco: 200,\n  descricao: 'Produto de contrato',\n  quantidade: 20\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoContrato)\n  .expectStatus(201);\n// Validação de contrato\nJoi.assert({ ...produtoContrato, _id: res.body._id }, produtoSchema);\n// Limpeza\nawait spec().delete(`/produtos/${res.body._id}`).withHeaders('Authorization', tokenAdmin);",
              "err": {},
              "uuid": "c182f87b-cc5c-470e-9990-039f1b55af11",
              "parentUUID": "f21817b8-dd34-403d-b506-6e70c00b16b6",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "cd248ede-69b1-4773-869c-d5894bef924a",
            "77305ad6-099d-4af6-a44a-454ee8724bf7",
            "18adf9b7-bba9-4535-8daf-bbcd969a4ce1",
            "0a6cc5d9-175f-4ed7-8689-85737d053a15",
            "f55c6bf6-301a-4f87-8be9-6d62aef278c0",
            "c182f87b-cc5c-470e-9990-039f1b55af11"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 192,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "d3c0b038-9ada-4202-8438-29827f71ec73",
          "title": "Usuários - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Usuarios.test.js",
          "file": "\\test\\api\\Usuarios.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Usuários - Funcional\"",
              "fullTitle": "Usuários - Funcional \"before all\" hook in \"Usuários - Funcional\"",
              "timedOut": false,
              "duration": 12,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Criar usuário dinâmico inicial para os testes\nconst novoUsuario = {\n  nome: 'QA Funcional',\n  email: `qa_funcional_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { ...novoUsuario, _id: res.body._id };",
              "err": {},
              "uuid": "ce477b21-9b8a-482c-906f-959480702426",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "POST /usuarios - Cadastro com sucesso",
              "fullTitle": "Usuários - Funcional POST /usuarios - Cadastro com sucesso",
              "timedOut": false,
              "duration": 71,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Novo QA',\n  email: `novoqa_${Date.now()}@qa.com`,\n  password: '123456',\n  administrador: 'false'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\nexpect(res.body.message).to.equal('Cadastro realizado com sucesso');\nexpect(res.body).to.have.property('_id');",
              "err": {},
              "uuid": "3263316d-a865-4da5-82c2-de013d769f21",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios - Busca do usuário",
              "fullTitle": "Usuários - Funcional GET /usuarios - Busca do usuário",
              "timedOut": false,
              "duration": 31,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/usuarios')\n  .expectStatus(200);\nres.body.usuarios.forEach(u => Joi.assert(u, usuarioSchema));",
              "err": {},
              "uuid": "753782a0-c37a-4993-9966-c18c43d385ea",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios/{_id} - Deve buscar usuário por ID",
              "fullTitle": "Usuários - Funcional GET /usuarios/{_id} - Deve buscar usuário por ID",
              "timedOut": false,
              "duration": 7,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/usuarios/${testUser._id}`)\n  .expectStatus(200);\nJoi.assert(res.body, usuarioSchema);",
              "err": {},
              "uuid": "7226b262-fea0-4af0-8b21-f6402d7280ac",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /usuarios/{_id} -Alteração do usuário por Id",
              "fullTitle": "Usuários - Funcional PUT /usuarios/{_id} -Alteração do usuário por Id",
              "timedOut": false,
              "duration": 18,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const updated = {\n  nome: 'QA Atualizado',\n  email: testUser.email,\n  password: testUser.password,\n  administrador: testUser.administrador\n};\nconst res = await spec()\n  .put(`/usuarios/${testUser._id}`)\n  .withJson(updated)\n  .expectStatus(200);\nexpect(res.body.message).to.equal('Registro alterado com sucesso');",
              "err": {},
              "uuid": "19991988-0983-425f-aeaf-824251d00d0a",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "fullTitle": "Usuários - Funcional DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "timedOut": false,
              "duration": 13,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/usuarios/${testUser._id}`)\n  .expectStatus(200);",
              "err": {},
              "uuid": "8241bd1f-6177-4ec6-b2c1-86ab6f4fc637",
              "parentUUID": "d3c0b038-9ada-4202-8438-29827f71ec73",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "3263316d-a865-4da5-82c2-de013d769f21",
            "753782a0-c37a-4993-9966-c18c43d385ea",
            "7226b262-fea0-4af0-8b21-f6402d7280ac",
            "19991988-0983-425f-aeaf-824251d00d0a",
            "8241bd1f-6177-4ec6-b2c1-86ab6f4fc637"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 140,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "cb33bf61-16ca-4ee9-9b88-39174488eba8",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\Cadastro.test.js",
          "file": "\\test\\contrato\\Cadastro.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 50,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Teste',\n  email: `teste${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "2cf2c48f-b191-4169-b4f7-f9f4e878e409",
              "parentUUID": "cb33bf61-16ca-4ee9-9b88-39174488eba8",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "2cf2c48f-b191-4169-b4f7-f9f4e878e409"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 50,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "158cec9a-1643-44f1-8284-ed69a9fd8122",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\usuarios.test.js",
          "file": "\\test\\contrato\\usuarios.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 12,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Contrato',\n  email: `qa_contrato_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "186ebbc2-4cad-4c27-a7f1-54a85962de65",
              "parentUUID": "158cec9a-1643-44f1-8284-ed69a9fd8122",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "186ebbc2-4cad-4c27-a7f1-54a85962de65"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 12,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 20000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.4"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "index",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "mochawesome-report",
        "reportFilename": "index"
      },
      "version": "6.3.0"
    }
  }
}