{
  "stats": {
    "suites": 5,
    "tests": 14,
    "passes": 13,
    "pending": 0,
    "failures": 1,
    "start": "2025-11-04T17:51:20.646Z",
    "end": "2025-11-04T17:51:31.793Z",
    "duration": 11147,
    "testsRegistered": 14,
    "passPercent": 92.85714285714286,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "8fa88bb4-90b1-4dc2-bd76-a74545b25e44",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "d6ca43f2-db68-4608-a9f7-e403df3adaea",
          "title": "POST /login - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Login.test.js",
          "file": "\\test\\api\\Login.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"POST /login - Funcional\"",
              "fullTitle": "POST /login - Funcional \"before all\" hook in \"POST /login - Funcional\"",
              "timedOut": false,
              "duration": 1432,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Fulano QA',\n  email: `login${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true',\n};\n// Cria usuário para login\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { email: novoUsuario.email, password: novoUsuario.password };",
              "err": {},
              "uuid": "15e6a3a1-b8ba-462e-b3e9-af3a94c13a60",
              "parentUUID": "d6ca43f2-db68-4608-a9f7-e403df3adaea",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve realizar login com credenciais válidas",
              "fullTitle": "POST /login - Funcional Deve realizar login com credenciais válidas",
              "timedOut": false,
              "duration": 49,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await pactum.spec()\n  .post(`${baseUrl}/login`)\n  .withBody(testUser)\n  .expectStatus(200)\n  .expectHeaderContains('content-type', 'application/json');\nJoi.assert(res.body, loginSuccessSchema);",
              "err": {},
              "uuid": "70099dc8-b140-4f97-9e19-0c77e8d708f7",
              "parentUUID": "d6ca43f2-db68-4608-a9f7-e403df3adaea",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "70099dc8-b140-4f97-9e19-0c77e8d708f7"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 49,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
          "title": "Produtos - Api e Contrato",
          "fullFile": "C:\\exercise-Api\\test\\api\\Produtos.test.js",
          "file": "\\test\\api\\Produtos.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Produtos - Api e Contrato\"",
              "fullTitle": "Produtos - Api e Contrato \"before all\" hook in \"Produtos - Api e Contrato\"",
              "timedOut": false,
              "duration": 172,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Cria usuário admin\nconst adminUser = {\n  nome: 'Admin QA',\n  email: `admin_${Date.now()}@qa.com`,\n  password: 'teste123',\n  administrador: 'true'\n};\nawait spec().post('/usuarios').withJson(adminUser).expectStatus(201);\n// Login para obter token\nconst resLogin = await spec()\n  .post('/login')\n  .withJson({ email: adminUser.email, password: adminUser.password })\n  .expectStatus(200);\ntokenAdmin = resLogin.body.authorization.startsWith('Bearer ')\n  ? resLogin.body.authorization\n  : `Bearer ${resLogin.body.authorization}`;",
              "err": {},
              "uuid": "93713853-de0a-4f2c-8548-7b4ad818230b",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "GET /produtos - Busca dos produtos",
              "fullTitle": "Produtos - Api e Contrato GET /produtos - Busca dos produtos",
              "timedOut": false,
              "duration": 374,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nconst produtosArray = Array.isArray(res.body) ? res.body : res.body.produtos;\nif (!Array.isArray(produtosArray)) throw new Error('Esperado array de produtos');\nif (produtosArray.length > 0) {\n  Joi.assert(produtosArray[0], produtoSchema);\n}",
              "err": {},
              "uuid": "2fab2bb8-24ca-48a2-8920-8d1ceddf72b5",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Cadastro de produto",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Cadastro de produto",
              "timedOut": false,
              "duration": 233,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoProduto = {\n  nome: `Produto QA ${Date.now()}`,\n  preco: 100,\n  descricao: 'Produto de teste',\n  quantidade: 10\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(novoProduto)\n  .expectStatus(201);\ntestProduto = { ...novoProduto, _id: res.body._id };",
              "err": {},
              "uuid": "2f39708e-69a4-484b-b702-c909f09883b2",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /produtos/{_id} - Busca do produto por id",
              "fullTitle": "Produtos - Api e Contrato GET /produtos/{_id} - Busca do produto por id",
              "timedOut": false,
              "duration": 148,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200);\nJoi.assert(res.body, produtoSchema);",
              "err": {},
              "uuid": "a10c5701-38db-4105-8e7f-7d64dfa14411",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /produtos/{_id} - Edição do produto por id",
              "fullTitle": "Produtos - Api e Contrato PUT /produtos/{_id} - Edição do produto por id",
              "timedOut": false,
              "duration": 118,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const { _id, ...produtoSemId } = testProduto;\nconst produtoAtualizado = {\n  ...produtoSemId,\n  nome: `Produto QA Atualizado ${Date.now()}`,\n  preco: 150,\n  quantidade: 15\n};\nconst res = await spec()\n  .put(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoAtualizado)\n  .expectStatus(200);\nif (res.body.message !== 'Registro alterado com sucesso') {\n  throw new Error(`Esperado 'Registro alterado com sucesso', mas retornou: ${res.body.message}`);\n}\ntestProduto = { ...produtoAtualizado, _id: testProduto._id };",
              "err": {},
              "uuid": "e21929f3-63cf-487c-90e8-9d6ca15eb31a",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /produtos/{_id} - Exclusão do produto por id",
              "fullTitle": "Produtos - Api e Contrato DELETE /produtos/{_id} - Exclusão do produto por id",
              "timedOut": false,
              "duration": 99,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/produtos/${testProduto._id}`)\n  .withHeaders('Authorization', tokenAdmin)\n  .expectStatus(200)\n  .expectJsonLike({ message: 'Registro excluído com sucesso' });",
              "err": {},
              "uuid": "83cbbb65-09af-4cd3-81cc-8bc0c55a902e",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "fullTitle": "Produtos - Api e Contrato POST /produtos - Teste de contrato do cadastro de produto com sucesso",
              "timedOut": false,
              "duration": 99,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const produtoContrato = {\n  nome: `Produto Contrato ${Date.now()}`,\n  preco: 200,\n  descricao: 'Produto de contrato',\n  quantidade: 20\n};\nconst res = await spec()\n  .post('/produtos')\n  .withHeaders('Authorization', tokenAdmin)\n  .withJson(produtoContrato)\n  .expectStatus(201);\n// Validação de contrato\nJoi.assert({ ...produtoContrato, _id: res.body._id }, produtoSchema);\n// Limpeza\nawait spec().delete(`/produtos/${res.body._id}`).withHeaders('Authorization', tokenAdmin);",
              "err": {},
              "uuid": "1210f01e-c8c1-43c2-9e70-484d898b21c7",
              "parentUUID": "3ccd924f-9d86-4dc6-9d20-26bc794af3f3",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "2fab2bb8-24ca-48a2-8920-8d1ceddf72b5",
            "2f39708e-69a4-484b-b702-c909f09883b2",
            "a10c5701-38db-4105-8e7f-7d64dfa14411",
            "e21929f3-63cf-487c-90e8-9d6ca15eb31a",
            "83cbbb65-09af-4cd3-81cc-8bc0c55a902e",
            "1210f01e-c8c1-43c2-9e70-484d898b21c7"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 1071,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
          "title": "Usuários - Funcional",
          "fullFile": "C:\\exercise-Api\\test\\api\\Usuarios.test.js",
          "file": "\\test\\api\\Usuarios.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Usuários - Funcional\"",
              "fullTitle": "Usuários - Funcional \"before all\" hook in \"Usuários - Funcional\"",
              "timedOut": false,
              "duration": 82,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "request.setBaseUrl(baseUrl);\nrequest.setDefaultHeaders({ 'Content-Type': 'application/json' });\n// Criar usuário dinâmico inicial para os testes\nconst novoUsuario = {\n  nome: 'QA Funcional',\n  email: `qa_funcional_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\ntestUser = { ...novoUsuario, _id: res.body._id };",
              "err": {},
              "uuid": "e4fb0032-dfab-4f76-afa9-80b751a80c6c",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [
            {
              "title": "POST /usuarios - Cadastro com sucesso",
              "fullTitle": "Usuários - Funcional POST /usuarios - Cadastro com sucesso",
              "timedOut": false,
              "duration": 54,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'Novo QA',\n  email: `novoqa_${Date.now()}@qa.com`,\n  password: '123456',\n  administrador: 'false'\n};\nconst res = await spec()\n  .post('/usuarios')\n  .withJson(novoUsuario)\n  .expectStatus(201);\nexpect(res.body.message).to.equal('Cadastro realizado com sucesso');\nexpect(res.body).to.have.property('_id');",
              "err": {},
              "uuid": "ba6fe3cf-091e-4245-97a2-7b0b0ecb066f",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios - Busca do usuário",
              "fullTitle": "Usuários - Funcional GET /usuarios - Busca do usuário",
              "timedOut": false,
              "duration": 149,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get('/usuarios')\n  .expectStatus(200);\nres.body.usuarios.forEach(u => Joi.assert(u, usuarioSchema));",
              "err": {},
              "uuid": "0bc1e10b-e2ba-4e01-a0ca-666aef8f199f",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "GET /usuarios/{_id} - Deve buscar usuário por ID",
              "fullTitle": "Usuários - Funcional GET /usuarios/{_id} - Deve buscar usuário por ID",
              "timedOut": false,
              "duration": 43,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const res = await spec()\n  .get(`/usuarios/${testUser._id}`)\n  .expectStatus(200);\nJoi.assert(res.body, usuarioSchema);",
              "err": {},
              "uuid": "8f7e93e5-0009-4753-ae89-aaa17a52a97d",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "PUT /usuarios/{_id} -Alteração do usuário por Id",
              "fullTitle": "Usuários - Funcional PUT /usuarios/{_id} -Alteração do usuário por Id",
              "timedOut": false,
              "duration": 307,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const updated = {\n  nome: 'QA Atualizado',\n  email: testUser.email,\n  password: testUser.password,\n  administrador: testUser.administrador\n};\nconst res = await spec()\n  .put(`/usuarios/${testUser._id}`)\n  .withJson(updated)\n  .expectStatus(200);\nexpect(res.body.message).to.equal('Registro alterado com sucesso');",
              "err": {},
              "uuid": "fcc6230b-1727-454c-a8d0-a1a8acde3035",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "fullTitle": "Usuários - Funcional DELETE /usuarios/{_id} - Exclusão do usuário por Id",
              "timedOut": false,
              "duration": 6506,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "await spec()\n  .delete(`/usuarios/${testUser._id}`)\n  .expectStatus(200);",
              "err": {
                "message": "Error: Timeout reached",
                "estack": "Error: Timeout reached\n    at ClientRequest.<anonymous> (node_modules\\centra\\model\\CentraRequest.js:206:14)\n    at Object.onceWrapper (node:events:631:28)\n    at ClientRequest.emit (node:events:517:28)\n    at Socket.emitRequestTimeout (node:_http_client:847:9)\n    at Object.onceWrapper (node:events:631:28)\n    at Socket.emit (node:events:529:35)\n    at Socket._onTimeout (node:net:598:8)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)",
                "diff": null
              },
              "uuid": "2e8c0cd2-fec3-49a5-9b6f-dfd0225a2d3b",
              "parentUUID": "d48dabbb-75b1-4246-92a0-617257cd4f6f",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "ba6fe3cf-091e-4245-97a2-7b0b0ecb066f",
            "0bc1e10b-e2ba-4e01-a0ca-666aef8f199f",
            "8f7e93e5-0009-4753-ae89-aaa17a52a97d",
            "fcc6230b-1727-454c-a8d0-a1a8acde3035"
          ],
          "failures": [
            "2e8c0cd2-fec3-49a5-9b6f-dfd0225a2d3b"
          ],
          "pending": [],
          "skipped": [],
          "duration": 7059,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "e0400f8d-516f-4c93-b367-a70faae9498d",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\Cadastro.test.js",
          "file": "\\test\\contrato\\Cadastro.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 19,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Teste',\n  email: `teste${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "67118fd0-e8fb-4f9d-a403-789ba8a099a2",
              "parentUUID": "e0400f8d-516f-4c93-b367-a70faae9498d",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "67118fd0-e8fb-4f9d-a403-789ba8a099a2"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 19,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        },
        {
          "uuid": "7e799e3a-42f4-4baa-9c5d-deb3851ff48e",
          "title": "POST /usuarios - Teste de Contrato",
          "fullFile": "C:\\exercise-Api\\test\\contrato\\usuarios.test.js",
          "file": "\\test\\contrato\\usuarios.test.js",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "Deve cadastrar usuário com sucesso",
              "fullTitle": "POST /usuarios - Teste de Contrato Deve cadastrar usuário com sucesso",
              "timedOut": false,
              "duration": 77,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const novoUsuario = {\n  nome: 'QA Contrato',\n  email: `qa_contrato_${Date.now()}@qa.com`,\n  password: 'teste',\n  administrador: 'true'\n};\nconst res = await pactum.spec()\n  .post(`${baseUrl}/usuarios`)\n  .withJson(novoUsuario)\n  .expectStatus(201);\nJoi.assert(res.body, cadastroSuccessSchema);",
              "err": {},
              "uuid": "9529b569-cea2-4d9c-91dc-f05318868c96",
              "parentUUID": "7e799e3a-42f4-4baa-9c5d-deb3851ff48e",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "9529b569-cea2-4d9c-91dc-f05318868c96"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 77,
          "root": false,
          "rootEmpty": false,
          "_timeout": 20000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 20000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.4"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "index",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "mochawesome-report",
        "reportFilename": "index"
      },
      "version": "6.3.0"
    }
  }
}